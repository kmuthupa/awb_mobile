/*
* Kendo UI Complete v2012.1.515 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at http://kendoui.com/complete-license
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
(function(a,b){function M(b){b.preventDefault(),a(f.body).trigger(b.type)}function L(a,b){return a.replace(/ /g,b+" ")}function K(a){return f.elementFromPoint(a.x.client,a.y.client)}function J(b,c){try{return a.contains(b,c)||b==c}catch(d){return!1}}var c=window.kendo,d=c.support,e=d.pointers,f=window.document,g=a(f.documentElement),h=c.Class,i=c.ui.Widget,j=c.Observable,k=a.proxy,l=a.extend,m=c.getOffset,n={},o={},p,q="resize",r=d.mobileOS&&d.mobileOS.android,s="mousedown",t="mousemove",u="mouseup mouseleave",v="keyup",w="change",x="dragstart",y="drag",z="dragend",A="dragcancel",B="dragenter",C="dragleave",D="drop",E="start",F="move",G="end",H="cancel",I="tap";d.touch&&(q="orientationchange",s="touchstart",t="touchmove",u="touchend touchcancel"),e&&(q="orientationchange resize",s="MSPointerDown",t="MSPointerMove",u="MSPointerUp MSPointerCancel");var N=h.extend({init:function(a){this.axis=a},start:function(a,b){var c=this,d=a["page"+c.axis];c.startLocation=c.location=d,c.client=a["client"+c.axis],c.velocity=c.delta=0,c.timeStamp=b},move:function(a,b){var c=this,d=a["page"+c.axis];if(!!d||!r)c.delta=d-c.location,c.location=d,c.client=a["client"+c.axis],c.initialDelta=d-c.startLocation,c.velocity=c.delta/(b-c.timeStamp),c.timeStamp=b}}),O=j.extend({init:function(b,e){var f=this,h={},i,m,n="."+c.guid();e=e||{},i=f.filter=e.filter,f.threshold=e.threshold||0,b=a(b),j.fn.init.call(f),h={},h[L(t,n)]=k(f._move,f),h[L(u,n)]=k(f._end,f),l(f,{x:new N("X"),y:new N("Y"),element:b,surface:e.global?g:b,stopPropagation:e.stopPropagation,pressed:!1,eventMap:h,ns:n}),b.on(s,i,k(f._start,f)).on("dragstart",i,c.preventDefault);if(!e.allowSelection){var o=["mousedown selectstart",i,M];i instanceof a&&o.splice(2,0,null),b.on.apply(b,o)}d.eventCapture&&(m=function(a){f.moved&&a.preventDefault()},f.surface[0].addEventListener(d.mouseup,m,!0)),f.bind([I,E,F,G,H],e)},capture:function(){O.captured=!0},cancel:function(){this._cancel(),this.trigger(H)},skip:function(){this._cancel()},_cancel:function(){var a=this;a.moved=a.pressed=!1,a.surface.off(a.ns)},_start:function(b){var c=this,f=c.filter,g=b.originalEvent,h,i=b;if(!c.pressed){f?c.target=a(b.target).is(f)?a(b.target):a(b.target).closest(f):c.target=c.element;if(!c.target.length)return;c.stopPropagation&&b.stopPropagation(),c.pressed=!0,c.moved=!1,d.touch&&(h=g.changedTouches[0],c.touchID=h.identifier,i=h),e&&(c.touchID=g.pointerId,i=g),c._perAxis(E,i,b.timeStamp),c.surface.off(c.eventMap).on(c.eventMap),O.captured=!1}},_move:function(a){var b=this,c,d,e;!b.pressed||b._withEvent(a,function(f){b._perAxis(F,f,a.timeStamp);if(!b.moved){c=b.x.initialDelta,d=b.y.initialDelta,e=Math.sqrt(c*c+d*d);if(e<=b.threshold)return;if(!O.captured)b._trigger(E,a),b.moved=!0;else return b._cancel()}b.pressed&&b._trigger(F,a)})},_end:function(a){var b=this;!b.pressed||b._withEvent(a,function(){b.moved?(b._trigger(G,a),b.moved=!1):b._trigger(I,a),b._cancel()})},_perAxis:function(a,b,c){this.x[a](b,c),this.y[a](b,c)},_trigger:function(a,b){var c={x:this.x,y:this.y,target:this.target,event:b};this.trigger(a,c)&&b.preventDefault()},_withEvent:function(a,b){var c=this,f=c.touchID,g=a.originalEvent,h,i;if(d.touch){h=g.changedTouches,i=h.length;while(i){i--;if(h[i].identifier===f)return b(h[i])}}else{if(!e)return b(a);if(f===g.pointerId)return b(g)}}}),P=j.extend({init:function(b,c){var d=this,e=b[0];d.capture=!1,e.addEventListener(s,k(d._press,d),!0),a.each(u.split(" "),function(){e.addEventListener(this,k(d._release,d),!0)}),j.fn.init.call(d),d.bind(["press","release"],c||{})},_press:function(a){var b=this;b.trigger("press"),b.capture&&a.preventDefault()},_release:function(a){var b=this;b.trigger("release"),b.capture&&(a.preventDefault(),b.cancelCapture())},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1}}),Q=j.extend({init:function(b){var c=this;j.fn.init.call(c),a.extend(c,b),c.max=0,c.horizontal?(c.measure="width",c.scrollSize="scrollWidth",c.axis="x"):(c.measure="height",c.scrollSize="scrollHeight",c.axis="y")},outOfBounds:function(a){return a>this.max||a<this.min},present:function(){return this.max-this.min},update:function(a){var b=this;b.size=b.container[b.measure](),b.total=b.element[0][b.scrollSize],b.min=Math.min(b.max,b.size-b.total),a||b.trigger(w,b)}}),R=j.extend({init:function(b){var c=this,e=k(c.refresh,c),f=e;j.fn.init.call(c),d.mobileOS.android&&(f=function(){setTimeout(e,200)}),c.x=new Q(l({horizontal:!0},b)),c.y=new Q(l({horizontal:!1},b)),c.bind(w,b),a(window).bind(q,f)},refresh:function(){this.x.update(),this.y.update(),this.trigger(w)}}),S=j.extend({init:function(a){var b=this;l(b,a),j.fn.init.call(b)},dragMove:function(a){var b=this,c=b.dimension,d=b.axis,e=b.movable,f=e[d]+a;if(!!c.present()){if(f<c.min&&a<0||f>c.max&&a>0)a*=b.resistance;e.translateAxis(d,a),b.trigger(w,b)}}}),T=h.extend({init:function(a){var b=this,c,d,e;l(b,{elastic:!0},a),e=b.elastic?.5:0,b.x=c=new S({axis:"x",dimension:b.dimensions.x,resistance:e,movable:b.movable}),b.y=d=new S({axis:"y",dimension:b.dimensions.y,resistance:e,movable:b.movable}),b.drag.bind(["move","end"],{move:function(a){c.dimension.present()||d.dimension.present()?(c.dragMove(a.x.delta),d.dragMove(a.y.delta),a.preventDefault()):b.drag.skip()},end:function(a){a.preventDefault()}})}}),U=d.transitions.prefix+"Transform",V=Math.round,W;d.hasHW3D?W=function(a,b){return"translate3d("+V(a)+"px,"+V(b)+"px,0)"}:W=function(a,b){return"translate("+V(a)+"px,"+V(b)+"px)"};var X=j.extend({init:function(b){var c=this;j.fn.init.call(c),c.element=a(b),c.x=0,c.y=0,c._saveCoordinates(W(c.x,c.y))},translateAxis:function(a,b){this[a]+=b,this.refresh()},translate:function(a){this.x+=a.x,this.y+=a.y,this.refresh()},moveAxis:function(a,b){this[a]=b,this.refresh()},moveTo:function(a){l(this,a),this.refresh()},refresh:function(){var a=this,b=W(a.x,a.y);b!=a.coordinates&&(a.element[0].style[U]=b,a._saveCoordinates(b),a.trigger(w))},_saveCoordinates:function(a){this.coordinates=a}}),Y=i.extend({init:function(a,b){var c=this;i.fn.init.call(c,a,b);var d=c.options.group;d in o?o[d].push(c):o[d]=[c]},events:[B,C,D],options:{name:"DropTarget",group:"default"},_trigger:function(a,b){var c=this,d=n[c.options.group];if(d)return c.trigger(a,l({},b.event,{draggable:d}))},_over:function(a){this._trigger(B,a)},_out:function(a){this._trigger(C,a)},_drop:function(a){var b=this,c=n[b.options.group];c&&(c.dropped=!b._trigger(D,a))}}),Z=i.extend({init:function(a,b){var d=this;i.fn.init.call(d,a,b),d.drag=new O(d.element,{global:!0,stopPropagation:!0,filter:d.options.filter,threshold:d.options.distance,start:k(d._start,d),move:k(d._drag,d),end:k(d._end,d),cancel:k(d._cancel,d)}),d.destroy=k(d._destroy,d),d.captureEscape=function(a){a.keyCode===c.keys.ESC&&(d._trigger(A,{event:a}),d.drag.cancel())}},events:[x,y,z,A],options:{name:"Draggable",distance:5,group:"default",cursorOffset:null,dropped:!1},_start:function(b){var c=this,d=c.options,e=d.hint;c.currentTarget=c.drag.target,c.currentTargetOffset=m(c.currentTarget);if(e){c.hint=a.isFunction(e)?a(e(c.currentTarget)):e;var g=m(c.currentTarget);c.hintOffset=g,c.hint.css({position:"absolute",zIndex:2e4,left:g.x,top:g.y}).appendTo(f.body)}n[d.group]=c,c.dropped=!1,c._trigger(x,b)&&(c.drag.cancel(),c.destroy()),a(f).on(v,c.captureEscape)},updateHint:function(a){var b=this,c,d=b.options.cursorOffset;d?c={left:a.x.location+d.left,top:a.y.location+d.top}:(b.hintOffset.left+=a.x.delta,b.hintOffset.top+=a.y.delta,c=b.hintOffset),b.hint.css(c)},_drag:function(a){var b=this;a.preventDefault(),b._withDropTarget(a,function(b){if(!b)p&&(p._trigger(C,a),p=null);else{if(p){if(b.element[0]===p.element[0])return;p._trigger(C,a)}b._trigger(B,a),p=b}}),b._trigger(y,a),b.hint&&b.updateHint(a)},_end:function(a){var b=this;b._withDropTarget(a,function(b){b&&(b._drop(a),p=null)}),b._trigger(z,a),b._cancel(a.event)},_cancel:function(a){var b=this;b.hint&&!b.dropped?b.hint.animate(b.currentTargetOffset,"fast",b.destroy):b.destroy()},_trigger:function(a,b){var c=this;return c.trigger(a,l({},b.event,{x:b.x,y:b.y,currentTarget:c.currentTarget}))},_withDropTarget:function(b,c){var d=this,e,f,g=d.options,h=o[g.group];h&&h.length&&(e=K(b),d.hint&&J(d.hint,e)&&(d.hint.hide(),e=K(b),d.hint.show()),a.each(h,function(){var a=this,b=a.element[0];if(J(b,e)){f=a;return!1}}),c(f))},_destroy:function(){var b=this;b.hint&&b.hint.remove(),delete n[b.options.group],b.trigger("destroy"),a(f).off(v,b.captureEscape)}});c.ui.plugin(Y),c.ui.plugin(Z),c.Drag=O,c.Tap=P,l(c.ui,{Pane:T,PaneDimensions:R,Movable:X})})(jQuery)